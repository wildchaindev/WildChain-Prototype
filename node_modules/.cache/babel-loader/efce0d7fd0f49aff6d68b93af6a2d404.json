{"ast":null,"code":"var _jsxFileName = \"/Users/minh/Desktop/TestSite/wc-prototype/src/pages/components/TokenDataMarketTest.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport * as fcl from \"@onflow/fcl\";\nimport * as t from \"@onflow/types\";\nimport { render } from \"@testing-library/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TokenDataMarketTest = props => {\n  _s();\n\n  const [nftInfo, setNftInfo] = useState(null); // Using this function for displaying ipfs content\n\n  function showImg(s) {\n    let arr = s.split(\"ipfs://\"); //console.log(arr);\n\n    if (s.split(\"ipfs://\").length === 2) {\n      let link = \"https://ipfs.io/ipfs/\" + arr[1]; //console.log(link);\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"token-data\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"icon\",\n          src: link,\n          alt: \"Giraffe\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  const fetchTokenData = async () => {\n    let testAddr = props.account; //console.log(\"Prop ID: \" + props.nftID)\n\n    let testID = parseInt(props.nftID);\n    const encoded = await fcl.send([fcl.script`\n        import DappState from 0xProfile\n\n        pub fun main(account: Address, nftId: UInt64) : {String : String} {\n          // Account that owns the NFT. \n          // In this case, this is the same account as the one that minted the NFT and deployed the contract.\n          let nftOwner = getAccount(account)\n          log(\"NFT Owner\")\n          // Simply borrows all capabilities that are available by access levels as defined by the contract\n          let capability = nftOwner.getCapability(/public/NFTReceiver)\n      \n          // Pull out the \"borrow()\" capability to get the script to borrow from the deployed contract\n          let receiverRef = capability.borrow<&{DappState.NFTReceiver}>()\n              ?? panic(\"Could not borrow the receiver reference\")\n      \n          // At this point, we can use any functions available by capabilities as defined by the contract\n          // Thus, call the getMetadata function.\n          // For the sake of this test, just getting metadata for the NFT with id 1.\n          return receiverRef.getMetadata(id: nftId)\n      }       \n      `, fcl.args([fcl.arg(testAddr, t.Address), fcl.arg(testID, t.UInt64)])]); //console.log(\"Data Type: \" + typeof(fcl.authz()))\n    //console.log(fcl.authz().addr)\n    //let testVal = await fcl.authz()\n    //console.log(\"TestVal: \" + await testVal.addr)\n\n    const decoded = await fcl.decode(encoded); //console.log(\"Decode: \" + decoded)\n\n    setNftInfo(decoded); //console.log(\"NFT Info: \" + nftInfo)\n    //console.log(\"NFT Info: \" + nftInfo[\"uri\"])\n    //console.log(nftInfo)\n  };\n\n  useEffect(() => {\n    let isMounted = true;\n\n    if (isMounted) {\n      fetchTokenData();\n    }\n\n    return () => {\n      {\n        isMounted = false;\n      }\n      ;\n    };\n  }, [props.account, props.nftID]);\n\n  if (nftInfo != null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"token-data\",\n      children: showImg(nftInfo[\"uri\"])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }, this);\n  } else return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Img Not Found\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 16\n  }, this);\n};\n\n_s(TokenDataMarketTest, \"IxWTcUXSO+ZRqJLxD2zfcLDLOFw=\");\n\n_c = TokenDataMarketTest;\nexport default TokenDataMarketTest;\n\nvar _c;\n\n$RefreshReg$(_c, \"TokenDataMarketTest\");","map":{"version":3,"sources":["/Users/minh/Desktop/TestSite/wc-prototype/src/pages/components/TokenDataMarketTest.js"],"names":["React","useEffect","useState","fcl","t","render","TokenDataMarketTest","props","nftInfo","setNftInfo","showImg","s","arr","split","length","link","fetchTokenData","testAddr","account","testID","parseInt","nftID","encoded","send","script","args","arg","Address","UInt64","decoded","decode","isMounted"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,KAAKC,GAAZ,MAAqB,aAArB;AACA,OAAO,KAAKC,CAAZ,MAAmB,eAAnB;AACA,SAASC,MAAT,QAAuB,wBAAvB;;;AAEA,MAAMC,mBAAmB,GAAIC,KAAD,IAAW;AAAA;;AACrC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAD,CAAtC,CADqC,CAGrC;;AACA,WAASQ,OAAT,CAAiBC,CAAjB,EAAoB;AAClB,QAAIC,GAAG,GAAGD,CAAC,CAACE,KAAF,CAAQ,SAAR,CAAV,CADkB,CAElB;;AACA,QAAGF,CAAC,CAACE,KAAF,CAAQ,SAAR,EAAmBC,MAAnB,KAA8B,CAAjC,EAAmC;AACjC,UAAIC,IAAI,GAAG,0BAAwBH,GAAG,CAAC,CAAD,CAAtC,CADiC,CAEjC;;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACE;AAAK,UAAA,EAAE,EAAC,MAAR;AAAe,UAAA,GAAG,EAAEG,IAApB;AAA0B,UAAA,GAAG,EAAC;AAA9B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AAKD;AACF;;AAED,QAAMC,cAAc,GAAG,YAAY;AACjC,QAAIC,QAAQ,GAAGV,KAAK,CAACW,OAArB,CADiC,CAEjC;;AACA,QAAIC,MAAM,GAAGC,QAAQ,CAACb,KAAK,CAACc,KAAP,CAArB;AACA,UAAMC,OAAO,GAAG,MAAMnB,GAAG,CACtBoB,IADmB,CACd,CACJpB,GAAG,CAACqB,MAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OArBY,EAsBNrB,GAAG,CAACsB,IAAJ,CACE,CAACtB,GAAG,CAACuB,GAAJ,CAAQT,QAAR,EAAkBb,CAAC,CAACuB,OAApB,CAAD,EACAxB,GAAG,CAACuB,GAAJ,CAAQP,MAAR,EAAgBf,CAAC,CAACwB,MAAlB,CADA,CADF,CAtBM,CADc,CAAtB,CAJiC,CA+BjC;AACA;AACA;AACA;;AACA,UAAMC,OAAO,GAAG,MAAM1B,GAAG,CAAC2B,MAAJ,CAAWR,OAAX,CAAtB,CAnCiC,CAoCjC;;AACAb,IAAAA,UAAU,CAACoB,OAAD,CAAV,CArCiC,CAsCjC;AACA;AACA;AACD,GAzCD;;AA2CA5B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI8B,SAAS,GAAG,IAAhB;;AACA,QAAIA,SAAJ,EAAc;AACZf,MAAAA,cAAc;AACf;;AACD,WAAO,MAAM;AACX;AAAEe,QAAAA,SAAS,GAAG,KAAZ;AAAmB;AAAA;AACtB,KAFD;AAGD,GARQ,EAQN,CAACxB,KAAK,CAACW,OAAP,EAAeX,KAAK,CAACc,KAArB,CARM,CAAT;;AAUA,MAAGb,OAAO,IAAI,IAAd,EAAmB;AACnB,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,gBACGE,OAAO,CAACF,OAAO,CAAC,KAAD,CAAR;AADV;AAAA;AAAA;AAAA;AAAA,YADF;AAKC,GAND,MAOK,oBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AACN,CA/ED;;GAAMF,mB;;KAAAA,mB;AAiFN,eAAeA,mBAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as fcl from \"@onflow/fcl\";\nimport * as t from \"@onflow/types\";\nimport { render } from \"@testing-library/react\";\n\nconst TokenDataMarketTest = (props) => {\n  const [nftInfo, setNftInfo] = useState(null)\n\n  // Using this function for displaying ipfs content\n  function showImg(s) {\n    let arr = s.split(\"ipfs://\");\n    //console.log(arr);\n    if(s.split(\"ipfs://\").length === 2){\n      let link = \"https://ipfs.io/ipfs/\"+arr[1];\n      //console.log(link);\n      return(\n        <div className=\"token-data\">\n          <img id=\"icon\" src={link} alt=\"Giraffe\"></img>\n        </div>\n      )\n    }\n  }\n\n  const fetchTokenData = async () => {\n    let testAddr = props.account\n    //console.log(\"Prop ID: \" + props.nftID)\n    let testID = parseInt(props.nftID)\n    const encoded = await fcl\n      .send([\n        fcl.script`\n        import DappState from 0xProfile\n\n        pub fun main(account: Address, nftId: UInt64) : {String : String} {\n          // Account that owns the NFT. \n          // In this case, this is the same account as the one that minted the NFT and deployed the contract.\n          let nftOwner = getAccount(account)\n          log(\"NFT Owner\")\n          // Simply borrows all capabilities that are available by access levels as defined by the contract\n          let capability = nftOwner.getCapability(/public/NFTReceiver)\n      \n          // Pull out the \"borrow()\" capability to get the script to borrow from the deployed contract\n          let receiverRef = capability.borrow<&{DappState.NFTReceiver}>()\n              ?? panic(\"Could not borrow the receiver reference\")\n      \n          // At this point, we can use any functions available by capabilities as defined by the contract\n          // Thus, call the getMetadata function.\n          // For the sake of this test, just getting metadata for the NFT with id 1.\n          return receiverRef.getMetadata(id: nftId)\n      }       \n      `,\n      fcl.args( \n        [fcl.arg(testAddr, t.Address),\n        fcl.arg(testID, t.UInt64)] )\n      ])\n    //console.log(\"Data Type: \" + typeof(fcl.authz()))\n    //console.log(fcl.authz().addr)\n    //let testVal = await fcl.authz()\n    //console.log(\"TestVal: \" + await testVal.addr)\n    const decoded = await fcl.decode(encoded)\n    //console.log(\"Decode: \" + decoded)\n    setNftInfo(decoded)\n    //console.log(\"NFT Info: \" + nftInfo)\n    //console.log(\"NFT Info: \" + nftInfo[\"uri\"])\n    //console.log(nftInfo)\n  };\n\n  useEffect(() => {\n    let isMounted = true;\n    if (isMounted){\n      fetchTokenData();\n    }\n    return () => {\n      { isMounted = false };\n    };\n  }, [props.account,props.nftID]);\n\n  if(nftInfo != null){\n  return (\n    <div className=\"token-data\">\n      {showImg(nftInfo[\"uri\"])}\n    </div>\n  );\n  }\n  else return (<div>Img Not Found</div>)\n};\n\nexport default TokenDataMarketTest;"]},"metadata":{},"sourceType":"module"}