{"ast":null,"code":"import { config as e } from \"@onflow/config\";\nexport { config } from \"@onflow/config\";\nimport { resolve as t, send as r, script as n, args as o, limit as i, decode as a, arg as s, createSignableVoucher as u, pipe as c, interaction as l, getTransactionStatus as d, latestBlock as f } from \"@onflow/sdk\";\nexport { account, arg, args, atBlockHeight, atBlockId, authorization, authorizations, build, createSignableVoucher, decode, getAccount, getBlock, getBlockByHeight, getBlockById, getBlockHeader, getCollection, getEvents, getEventsAtBlockHeightRange, getEventsAtBlockIds, getLatestBlock, getTransaction, getTransactionStatus, invariant, isBad, isOk, latestBlock, limit, param, params, payer, ping, pipe, proposer, ref, script, send, transaction, validator, why } from \"@onflow/sdk\";\nimport { invariant as h } from \"@onflow/util-invariant\";\nimport * as p from \"@onflow/types\";\nimport { INIT as v, SUBSCRIBE as m, UPDATED as y, UNSUBSCRIBE as P, SNAPSHOT as g, subscriber as E, spawn as b, snapshoter as w, send as S } from \"@onflow/util-actor\";\nimport { withPrefix as R, sansPrefix as I } from \"@onflow/util-address\";\nexport { display, sansPrefix, withPrefix } from \"@onflow/util-address\";\nimport { encode as A } from \"@onflow/rlp\";\nimport { uid as C } from \"@onflow/util-uid\";\nexport { template as cadence, template as cdc } from \"@onflow/util-template\";\ne().put(\"accessNode.api\", \"http://localhost:8080\").put(\"challenge.handshake\", \"http://localhost:8700/authenticate\"), e().put(\"sdk.resolve\", t);\n\nvar j,\n    T,\n    k = \"0.0.72\",\n    O = function (e) {\n  void 0 === e && (e = {});\n\n  try {\n    return Promise.resolve(function (e) {\n      try {\n        return h(N(e.cadence), \"query({ cadence }) -- cadence is required\"), h(_(e.cadence), \"query({ cadence }) -- cadence must be a string\"), Promise.resolve();\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }(e)).then(function () {\n      return r([n(e.cadence), o((t = e.args || [], \"function\" == typeof t ? t(s, p) : [])), e.limit && \"number\" == typeof e.limit && i(e.limit)]).then(a);\n      var t;\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    N = function (e) {\n  return null != typeof e;\n},\n    _ = function (e) {\n  return \"string\" == typeof e;\n},\n    x = function (r, n) {\n  void 0 === r && (r = []), void 0 === n && (n = {});\n\n  try {\n    return Promise.resolve(e().get(\"sdk.resolve\", n.resolve || t(n))).then(function (e) {\n      function t() {\n        return Promise.resolve(e(r)).then(function (e) {\n          return JSON.stringify(u(e), null, 2);\n        });\n      }\n\n      var n = function () {\n        if (Array.isArray(r)) return Promise.resolve(c(l(), r)).then(function (e) {\n          r = e;\n        });\n      }();\n\n      return n && n.then ? n.then(t) : t();\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    D = function (e) {\n  try {\n    return Promise.resolve(r([d(e)]).then(a));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    L = function (e) {\n  return e.status >= 4;\n},\n    U = function (e) {\n  return e.status >= 3;\n},\n    z = function (e) {\n  return e.status >= 2;\n},\n    F = ((j = {})[v] = function (e) {\n  try {\n    return Promise.resolve(D(e.self())).then(function (t) {\n      L(t) || setTimeout(function () {\n        return e.sendSelf(\"POLL\");\n      }, 2500), e.merge(t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, j[m] = function (e, t) {\n  e.subscribe(t.from), e.send(t.from, y, e.all());\n}, j[P] = function (e, t) {\n  e.unsubscribe(t.from);\n}, j[g] = function (e, t) {\n  try {\n    return t.reply(e.all()), Promise.resolve();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, j.POLL = function (e) {\n  try {\n    return Promise.resolve(D(e.self())).then(function (t) {\n      var r, n;\n      L(t) || setTimeout(function () {\n        return e.sendSelf(\"POLL\");\n      }, 2500), r = e.all(), n = t, JSON.stringify(r) !== JSON.stringify(n) && e.broadcast(y, t), e.merge(t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, j),\n    H = function (e) {\n  if (\"object\" == typeof e && (e = e.transactionId), null == e) throw new Error(\"transactionId required\");\n  return e;\n},\n    B = function (e) {\n  return b(F, H(e));\n};\n\nfunction M(e) {\n  function t(t) {\n    return E(H(e), B, t);\n  }\n\n  function r(e) {\n    return function (r) {\n      void 0 === r && (r = {});\n      var n = r.suppress || !1;\n      return new Promise(function (r, o) {\n        var i = t(function (t) {\n          t.statusCode && !n ? (o(t.errorMessage), i()) : e(t) && (r(t), i());\n        });\n      });\n    };\n  }\n\n  return {\n    snapshot: function () {\n      return w(e, B);\n    },\n    subscribe: t,\n    onceFinalized: r(z),\n    onceExecuted: r(U),\n    onceSealed: r(L)\n  };\n}\n\nfunction J() {\n  return (J = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction G(e, t) {\n  (null == t || t > e.length) && (t = e.length);\n\n  for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];\n\n  return n;\n}\n\nfunction q(e, t) {\n  var r;\n\n  if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n    if (Array.isArray(e) || (r = function (e, t) {\n      if (e) {\n        if (\"string\" == typeof e) return G(e, void 0);\n        var r = Object.prototype.toString.call(e).slice(8, -1);\n        return \"Object\" === r && e.constructor && (r = e.constructor.name), \"Map\" === r || \"Set\" === r ? Array.from(e) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? G(e, void 0) : void 0;\n      }\n    }(e)) || t && e && \"number\" == typeof e.length) {\n      r && (e = r);\n      var n = 0;\n      return function () {\n        return n >= e.length ? {\n          done: !0\n        } : {\n          done: !1,\n          value: e[n++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  return (r = e[Symbol.iterator]()).next.bind(r);\n}\n\nM.isUnknown = function (e) {\n  return e.status >= 0;\n}, M.isPending = function (e) {\n  return e.status >= 1;\n}, M.isFinalized = z, M.isExecuted = U, M.isSealed = L, M.isExpired = function (e) {\n  return 5 === e.status;\n};\n\nvar V = function (t) {\n  try {\n    var r = setTimeout;\n    return Promise.resolve(e().get(\"fcl.eventPollRate\", 1e4)).then(function (e) {\n      return r(function () {\n        return t.sendSelf(\"TICK\");\n      }, e);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Y = ((T = {}).TICK = function (e) {\n  try {\n    if (!e.hasSubs()) return Promise.resolve();\n\n    var t = e.get(\"hwm\"),\n        n = function () {\n      if (null == t) {\n        var n = e.put;\n        return Promise.resolve(f()).then(function (t) {\n          n.call(e, \"hwm\", t);\n          var r = e.put;\n          return Promise.resolve(V(e)).then(function (t) {\n            r.call(e, \"tick\", t);\n          });\n        });\n      }\n\n      return Promise.resolve(f()).then(function (n) {\n        return e.put(\"hwm\", n), Promise.resolve(r([getEvents(e.self(), t.height, n.height - 1)]).then(a)).then(function (t) {\n          for (var r, n = q(t); !(r = n()).done;) e.broadcast(\"UPDATED\", r.value.data);\n\n          var o = e.put;\n          return Promise.resolve(V(e)).then(function (t) {\n            o.call(e, \"tick\", t);\n          });\n        });\n      });\n    }();\n\n    return Promise.resolve(n && n.then ? n.then(function () {}) : void 0);\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, T[m] = function (e, t) {\n  try {\n    var r = function () {\n      e.subscribe(t.from);\n    },\n        n = function () {\n      if (!e.hasSubs()) {\n        var t = e.put;\n        return Promise.resolve(V(e)).then(function (r) {\n          t.call(e, \"tick\", r);\n        });\n      }\n    }();\n\n    return Promise.resolve(n && n.then ? n.then(r) : r());\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, T[P] = function (e, t) {\n  e.unsubscribe(t.from), e.hasSubs() || (clearTimeout(e.get(\"tick\")), e.delete(\"tick\"), e.delete(\"hwm\"));\n}, T),\n    Z = function (e) {\n  return b(Y, e);\n};\n\nfunction K(e) {\n  return {\n    subscribe: function (t) {\n      return E(e, Z, t);\n    }\n  };\n}\n\nvar X = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\"\n},\n    $ = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\"\n},\n    W = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\"\n},\n    Q = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\"\n},\n    ee = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\"\n};\n\nfunction te(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return J({\n        old: e\n      }, X, {\n        type: \"frame\",\n        endpoint: e.endpoint,\n        params: e.params || {},\n        data: e.data || {}\n      });\n  }\n}\n\nfunction re(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return J({}, X, {\n        type: \"back-channel-rpc\",\n        endpoint: e.endpoint,\n        method: e.method,\n        params: e.params || {},\n        data: e.data || {}\n      });\n  }\n}\n\nvar ne = {\n  \"back-channel-rpc\": re,\n  \"pre-authz\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return J({}, X, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.endpoint,\n          method: e.method,\n          identity: J({}, $, {\n            address: R(e.addr),\n            keyId: e.keyId\n          }),\n          params: e.params,\n          data: e.data\n        });\n    }\n  },\n  authz: function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return J({}, X, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.endpoint,\n          method: e.method,\n          identity: J({}, $, {\n            address: R(e.addr),\n            keyId: e.keyId\n          }),\n          params: e.params,\n          data: e.data\n        });\n    }\n  },\n  authn: function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return J({}, X, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.authn,\n          id: e.pid,\n          provider: {\n            address: R(e.addr),\n            name: e.name,\n            icon: e.icon\n          }\n        });\n    }\n  },\n  frame: te,\n  \"open-id\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return null;\n    }\n  },\n  \"user-signature\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        throw new Error(\"Invalid user-signature service\");\n    }\n  }\n};\n\nfunction oe(e) {\n  return A([e.provider.address || e.provider.name || \"UNSPECIFIED\", e.id]).toString(\"hex\");\n}\n\nfunction ie(e, t) {\n  return void 0 === e && (e = []), e.find(function (e) {\n    return e.type === t;\n  });\n}\n\nfunction ae(e) {\n  var t = new URL(e.endpoint);\n  if (t.searchParams.append(\"l6n\", window.location.origin), null != e.params) for (var r = 0, n = Object.entries(e.params || {}); r < n.length; r++) {\n    var o = n[r];\n    t.searchParams.append(o[0], o[1]);\n  }\n  return t;\n}\n\nfunction se(e, t) {\n  void 0 === t && (t = {});\n  var r = t.method || \"POST\",\n      n = \"GET\" === r ? void 0 : JSON.stringify(t.data || e.data || {});\n  return fetch(ae(e), {\n    method: r,\n    headers: J({}, e.headers || {}, t.headers || {}, {\n      \"Content-Type\": \"application/json\"\n    }),\n    body: n\n  }).then(function (e) {\n    return e.json();\n  });\n}\n\nfunction ue(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return J({}, Q, {\n        status: e.status,\n        reason: e.reason,\n        data: e.compositeSignature || e.data || {},\n        updates: re(e.authorizationUpdates),\n        local: te((e.local || [])[0])\n      });\n  }\n}\n\nfunction ce(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return J({}, ee, {\n        addr: I(e.addr || e.address),\n        signature: e.signature || e.sig,\n        keyId: e.keyId\n      });\n  }\n}\n\nvar le = \"FCL_IFRAME\",\n    de = function () {},\n    fe = new Set([\"monetizationstart\", \"monetizationpending\", \"monetizationprogress\", \"monetizationstop\"]);\n\nfunction he(e, t) {\n  if (void 0 === t && (t = {}), null == e) return {\n    send: de,\n    close: de\n  };\n  var r = t.onClose || de,\n      n = t.onMessage || de,\n      o = t.onReady || de,\n      i = t.onResponse || de;\n  window.addEventListener(\"message\", c);\n\n  var a = function (e) {\n    h(!document.getElementById(le), \"Attempt at triggering multiple Frames\", {\n      src: e\n    });\n    var t = document.createElement(\"iframe\");\n    return t.src = e, t.id = le, t.allow = \"usb *; hid *\", t.frameBorder = \"0\", t.style.cssText = \"\\n  position:fixed;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  height: 100vh;\\n  width: 100vw;\\n  display:block;\\n  background:rgba(0,0,0,0.25);\\n  z-index: 2147483647;\\n  box-sizing: border-box;\\n\", document.body.append(t), [t, function () {\n      document.getElementById(le) && document.getElementById(le).remove();\n    }];\n  }(ae(e)),\n      s = a[0],\n      u = a[1];\n\n  return {\n    send: d,\n    close: l\n  };\n\n  function c(e) {\n    try {\n      if (\"object\" != typeof e.data) return;\n      if (fe.has(e.data.type)) return;\n      \"FCL:FRAME:CLOSE\" === e.data.type && l(), \"FCL:FRAME:READY\" === e.data.type && o(e, {\n        send: d,\n        close: l\n      }), \"FCL:FRAME:RESPONSE\" === e.data.type && i(e, {\n        send: d,\n        close: l\n      }), n(e, {\n        send: d,\n        close: l\n      }), \"FCL::CHALLENGE::RESPONSE\" === e.data.type && i(e, {\n        send: d,\n        close: l\n      }), \"FCL::AUTHZ_READY\" === e.data.type && o(e, {\n        send: d,\n        close: l\n      }), \"FCL::CHALLENGE::CANCEL\" === e.data.type && l(), \"FCL::CANCEL\" === e.data.type && l();\n    } catch (e) {\n      console.error(\"Frame Callback Error\", e), l();\n    }\n  }\n\n  function l() {\n    try {\n      window.removeEventListener(\"message\", c), u(), r();\n    } catch (e) {\n      console.error(\"Frame Close Error\", e);\n    }\n  }\n\n  function d(e) {\n    try {\n      s.contentWindow.postMessage(JSON.parse(JSON.stringify(e || {})), \"*\");\n    } catch (t) {\n      console.error(\"Frame Send Error\", e, t);\n    }\n  }\n}\n\nvar pe,\n    ve = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\"\n},\n    me = function (e) {\n  return h(ve[e.method], \"Invalid Service Method for type back-channel-rpc\", {\n    service: e\n  }), ve[e.method];\n},\n    ye = function (e, t, r) {\n  try {\n    return t.data = e.data, Promise.resolve(se(e, {\n      data: t\n    }).then(ue)).then(function (t) {\n      if (\"APPROVED\" === t.status) return t.data;\n      if (\"DECLINED\" === t.status) throw new Error(\"Declined: \" + (t.reason || \"No reason supplied.\"));\n\n      if (\"PENDING\" === t.status) {\n        var r = !0,\n            n = he(t.local, {\n          onClose: function () {\n            r = !1;\n          }\n        }).close;\n        return function e(t, r) {\n          void 0 === r && (r = function () {\n            return !0;\n          });\n\n          try {\n            if (h(t, \"Missing Polling Service\", {\n              service: t\n            }), !r()) throw new Error(\"Externally Halted\");\n            return Promise.resolve(se(t, {\n              method: me(t)\n            }).then(ue)).then(function (t) {\n              switch (t.status) {\n                case \"APPROVED\":\n                  return t.data;\n\n                case \"DECLINED\":\n                  throw new Error(\"Declined: \" + (t.reason || \"No reason supplied.\"));\n\n                default:\n                  return Promise.resolve(new Promise(function (e) {\n                    return setTimeout(e, 500);\n                  })).then(function () {\n                    return e(t.updates, r);\n                  });\n              }\n            });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }(t.updates, function () {\n          return r;\n        }).then(function (e) {\n          return n(), ce(e);\n        }).catch(function (e) {\n          throw console.error(e), n(), e;\n        });\n      }\n\n      throw console.error(\"Auto Decline: Invalid Response\", {\n        service: e,\n        resp: t\n      }), new Error(\"Auto Decline: Invalid Response\");\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Pe = function (e, t, r) {\n  void 0 === r && (r = {});\n\n  try {\n    try {\n      return Promise.resolve(ge[e.method](e, t, r));\n    } catch (n) {\n      throw console.error(\"execService(service, msg)\", n, {\n        service: e,\n        msg: t,\n        opts: r\n      }), n;\n    }\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    ge = {\n  \"HTTP/RPC\": ye,\n  \"HTTP/POST\": ye,\n  \"IFRAME/RPC\": function (e, t, r) {\n    return new Promise(function (n, o) {\n      var i = C(),\n          a = r.includeOlderJsonRpcCall;\n      t.data = e.data, he(e, {\n        onReady: function (r, n) {\n          var o = n.send;\n\n          try {\n            o({\n              type: \"FCL:FRAME:READY:RESPONSE\",\n              body: t,\n              service: {\n                params: e.params,\n                data: e.data\n              }\n            }), a && o({\n              jsonrpc: \"2.0\",\n              id: i,\n              method: \"fcl:sign\",\n              params: [t, e.params]\n            });\n          } catch (e) {\n            throw e;\n          }\n        },\n        onResponse: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            var i = ue(e.data);\n\n            switch (i.status) {\n              case \"APPROVED\":\n                n(ce(i.data)), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (i.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execIframeRPC onResponse error\", e), e;\n          }\n        },\n        onMessage: function (e, t) {\n          var r = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (\"2.0\" !== e.data.jsonrpc) return;\n            if (e.data.id !== i) return;\n            var a = ue(e.data.result);\n\n            switch (a.status) {\n              case \"APPROVED\":\n                n(ce(a.data)), r();\n                break;\n\n              case \"DECLINED\":\n                o(\"Declined: \" + (a.reason || \"No reason supplied\")), r();\n                break;\n\n              default:\n                o(\"Declined: No reason supplied\"), r();\n            }\n          } catch (e) {\n            throw console.error(\"execIframeRPC onMessage error\", e), e;\n          }\n        },\n        onClose: function () {\n          o(\"Declined: Externally Halted\");\n        }\n      });\n    });\n  }\n};\n\nfunction Ee(e, t, r) {\n  if (!e.s) {\n    if (r instanceof Se) {\n      if (!r.s) return void (r.o = Ee.bind(null, e, t));\n      1 & t && (t = r.s), r = r.v;\n    }\n\n    if (r && r.then) return void r.then(Ee.bind(null, e, t), Ee.bind(null, e, 2));\n    e.s = t, e.v = r;\n    var n = e.o;\n    n && n(e);\n  }\n}\n\nvar be = function (e, t) {\n  void 0 === t && (t = {});\n\n  try {\n    return xe(), Promise.resolve(Ie(t)).then(function (t) {\n      var r = ie(t.services, \"user-signature\");\n      return h(r, \"Current user must have authorized a signing service.\"), function (t, n) {\n        try {\n          var o = Promise.resolve(Pe(r, He(e)));\n        } catch (e) {\n          return n(e);\n        }\n\n        return o && o.then ? o.then(void 0, n) : o;\n      }(0, function (e) {\n        console.log(e);\n      });\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    we = function (e) {\n  try {\n    return xe(), Promise.resolve(Ie()).then(function (t) {\n      var r = ie(t.services, \"authz\"),\n          n = ie(t.services, \"pre-authz\");\n      return J({}, e, n ? {\n        tempId: \"CURRENT_USER\",\n        resolve: function (e, t) {\n          try {\n            return Promise.resolve(Pe(n, t)).then(Ue);\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }\n      } : {\n        tempId: \"CURRENT_USER\",\n        resolve: null,\n        addr: I(r.identity.address),\n        keyId: r.identity.keyId,\n        sequenceNum: null,\n        signature: null,\n        signingFunction: function (e) {\n          try {\n            return Promise.resolve(Pe(r, e, {\n              includeOlderJsonRpcCall: !0\n            }));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }\n      });\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Se = function () {\n  function e() {}\n\n  return e.prototype.then = function (t, r) {\n    var n = new e(),\n        o = this.s;\n\n    if (o) {\n      var i = 1 & o ? t : r;\n\n      if (i) {\n        try {\n          Ee(n, 1, i(this.v));\n        } catch (e) {\n          Ee(n, 2, e);\n        }\n\n        return n;\n      }\n\n      return this;\n    }\n\n    return this.o = function (e) {\n      try {\n        var o = e.v;\n        1 & e.s ? Ee(n, 1, t ? t(o) : o) : r ? Ee(n, 1, r(o)) : Ee(n, 2, o);\n      } catch (e) {\n        Ee(n, 2, e);\n      }\n    }, n;\n  }, e;\n}();\n\nfunction Re(e) {\n  return e instanceof Se && 1 & e.s;\n}\n\nvar Ie = function (t) {\n  void 0 === t && (t = {});\n\n  try {\n    return Promise.resolve(new Promise(function (r, n) {\n      try {\n        return xe(), Promise.resolve(Fe()).then(function (n) {\n          if (n.loggedIn && De(n)) return r(n);\n          var o = t.serviceStrategy || he;\n          return Promise.resolve(e().get(\"discovery.wallet\")).then(function (t) {\n            function n(e) {\n              o({\n                endpoint: e\n              }, {\n                onReady: function (e, t) {\n                  var r = t.send;\n\n                  try {\n                    return Promise.resolve(Ae(/^service\\./)).then(function (e) {\n                      return Promise.resolve(Ae(/^app\\.detail\\./)).then(function (t) {\n                        r({\n                          type: \"FCL:AUTHN:CONFIG\",\n                          services: e,\n                          app: t\n                        });\n                      });\n                    });\n                  } catch (e) {\n                    return Promise.reject(e);\n                  }\n                },\n                onClose: function () {\n                  try {\n                    return Promise.resolve(Fe()).then(function (e) {\n                      r(e);\n                    });\n                  } catch (e) {\n                    return Promise.reject(e);\n                  }\n                },\n                onResponse: function (e, t) {\n                  var n = t.close;\n\n                  try {\n                    return Promise.resolve(function (e) {\n                      try {\n                        var t = (e = function (e) {\n                          return e.addr = e.addr ? R(e.addr) : null, e.paddr = e.paddr ? R(e.paddr) : null, e;\n                        }(e)).services || [];\n\n                        return Promise.resolve(function (e, t) {\n                          try {\n                            if (null == e || null == t) return Promise.resolve([]);\n                            var r = new URL(e);\n                            return r.searchParams.append(\"code\", t), Promise.resolve(fetch(r, {\n                              method: \"GET\",\n                              headers: {\n                                \"Content-Type\": \"application/json\"\n                              }\n                            }).then(function (e) {\n                              return e.json();\n                            })).then(function (e) {\n                              if (Array.isArray(e)) return e;\n                              var t = [];\n                              if (Array.isArray(e.authorizations)) for (var r, n = q(e.authorizations); !(r = n()).done;) t.push(J({\n                                type: \"authz\",\n                                keyId: e.keyId\n                              }, r.value));\n                              return null != e.provider && t.push(J({\n                                type: \"authn\",\n                                id: \"wallet-provider#authn\"\n                              }, e.provider)), t;\n                            });\n                          } catch (e) {\n                            return Promise.reject(e);\n                          }\n                        }(e.hks, e.code)).then(function (r) {\n                          var n,\n                              o,\n                              i = (n = t, o = r, void 0 === n && (n = []), void 0 === o && (o = []), [].concat(n, o)).map(function (t) {\n                            return function (e, t) {\n                              try {\n                                return ne[e.type](e, t);\n                              } catch (t) {\n                                return console.error(\"Unrecognized FCL Service Type [\" + e.type + \"]\", e, t), e;\n                              }\n                            }(t, e);\n                          }),\n                              a = function (e, t) {\n                            return t.find(function (e) {\n                              return \"authn\" === e.type;\n                            });\n                          }(0, i);\n\n                          return J({}, W, {\n                            addr: R(e.addr),\n                            cid: oe(a),\n                            loggedIn: !0,\n                            services: i,\n                            expiresAt: e.exp\n                          });\n                        });\n                      } catch (e) {\n                        return Promise.reject(e);\n                      }\n                    }(e.data)).then(function (e) {\n                      return S(Ce, Te, e), Promise.resolve(Fe()).then(function (e) {\n                        r(e), n();\n                      });\n                    });\n                  } catch (e) {\n                    return Promise.reject(e);\n                  }\n                }\n              });\n            }\n\n            return t ? n(t) : Promise.resolve(e().get(\"challenge.handshake\")).then(n);\n          });\n        });\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Ae = function (t) {\n  try {\n    return Promise.resolve(e().where(t)).then(function (e) {\n      return Object.fromEntries(Object.entries(e).map(function (e) {\n        var r = e[1];\n        return [e[0].replace(t, \"\"), r];\n      }));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Ce = \"CURRENT_USER\",\n    je = \"CURRENT_USER/UPDATED\",\n    Te = \"SET_CURRENT_USER\",\n    ke = '{\\n  \"f_type\": \"User\",\\n  \"f_vsn\": \"1.0.0\",\\n  \"addr\":null,\\n  \"cid\":null,\\n  \"loggedIn\":null,\\n  \"expiresAt\":null,\\n  \"services\":[]\\n}',\n    Oe = function (e) {\n  try {\n    return sessionStorage.setItem(Ce, JSON.stringify(e)), Promise.resolve(e);\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Ne = function () {\n  return e().get(\"persistSession\", !0);\n},\n    _e = ((pe = {})[v] = function (e) {\n  try {\n    return e.merge(JSON.parse(ke)), Promise.resolve(Ne()).then(function (t) {\n      var r = function () {\n        if (t) return Promise.resolve(function () {\n          try {\n            var e = JSON.parse(ke),\n                t = JSON.parse(sessionStorage.getItem(Ce));\n            return null != t && e.f_vsn !== t.f_vsn ? (sessionStorage.removeItem(Ce), Promise.resolve(e)) : Promise.resolve(t || e);\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }()).then(function (t) {\n          De(t) && e.merge(t);\n        });\n      }();\n\n      if (r && r.then) return r.then(function () {});\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, pe[m] = function (e, t) {\n  e.subscribe(t.from), e.send(t.from, je, J({}, e.all()));\n}, pe[P] = function (e, t) {\n  e.unsubscribe(t.from);\n}, pe.SNAPSHOT = function (e, t) {\n  try {\n    return t.reply(J({}, e.all())), Promise.resolve();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, pe[Te] = function (e, t, r) {\n  try {\n    return e.merge(r), Promise.resolve(Ne()).then(function (t) {\n      t && Oe(e.all()), e.broadcast(je, J({}, e.all()));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, pe.DEL_CURRENT_USER = function (e, t) {\n  try {\n    return e.merge(JSON.parse(ke)), Promise.resolve(Ne()).then(function (t) {\n      t && Oe(e.all()), e.broadcast(je, J({}, e.all()));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, pe),\n    xe = function () {\n  return b(_e, Ce);\n};\n\nfunction De(e) {\n  return null == e.expiresAt || 0 === e.expiresAt || e.expiresAt > Date.now();\n}\n\nfunction Le() {\n  xe(), S(Ce, \"DEL_CURRENT_USER\");\n}\n\nfunction Ue(e) {\n  var t = function (e) {\n    return {\n      f_type: \"PreAuthzResponse\",\n      f_vsn: \"1.0.0\",\n      proposer: (e || {}).proposer,\n      payer: (e || {}).payer || [],\n      authorization: (e || {}).authorization || []\n    };\n  }(e),\n      r = [];\n\n  null != t.proposer && r.push([\"PROPOSER\", t.proposer]);\n\n  for (var n, o = q(t.payer || []); !(n = o()).done;) r.push([\"PAYER\", n.value]);\n\n  for (var i, a = q(t.authorization || []); !(i = a()).done;) r.push([\"AUTHORIZER\", i.value]);\n\n  return r.map(function (e) {\n    var t = e[0],\n        r = e[1];\n    return {\n      tempId: [r.identity.address, r.identity.keyId].join(\"|\"),\n      addr: r.identity.address,\n      keyId: r.identity.keyId,\n      signingFunction: function (e) {\n        return Pe(r, e);\n      },\n      role: {\n        proposer: \"PROPOSER\" === t,\n        payer: \"PAYER\" === t,\n        authorizer: \"AUTHORIZER\" === t\n      }\n    };\n  });\n}\n\nfunction ze(e) {\n  xe();\n  var t = b(function (t) {\n    try {\n      var r;\n      return t.send(Ce, m), Promise.resolve(function (e, t, r) {\n        for (var n;;) {\n          var o = e();\n          if (Re(o) && (o = o.v), !o) return i;\n\n          if (o.then) {\n            n = 0;\n            break;\n          }\n\n          var i = r();\n\n          if (i && i.then) {\n            if (!Re(i)) {\n              n = 1;\n              break;\n            }\n\n            i = i.s;\n          }\n        }\n\n        var a = new Se(),\n            s = Ee.bind(null, a, 2);\n        return (0 === n ? o.then(c) : 1 === n ? i.then(u) : (void 0).then(function () {\n          (o = e()) ? o.then ? o.then(c).then(void 0, s) : c(o) : Ee(a, 1, i);\n        })).then(void 0, s), a;\n\n        function u(t) {\n          i = t;\n\n          do {\n            if (!(o = e()) || Re(o) && !o.v) return void Ee(a, 1, i);\n            if (o.then) return void o.then(c).then(void 0, s);\n            Re(i = r()) && (i = i.v);\n          } while (!i || !i.then);\n\n          i.then(u).then(void 0, s);\n        }\n\n        function c(e) {\n          e ? (i = r()) && i.then ? i.then(u).then(void 0, s) : u(i) : Ee(a, 1, i);\n        }\n      }(function () {\n        return !r && 1;\n      }, 0, function () {\n        return Promise.resolve(t.receive()).then(function (n) {\n          if (\"@EXIT\" === n.tag) return t.send(Ce, P), void (r = 1);\n          e(n.data);\n        });\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  });\n  return function () {\n    return S(t, \"@EXIT\");\n  };\n}\n\nfunction Fe() {\n  return xe(), S(Ce, \"SNAPSHOT\", null, {\n    expectReply: !0,\n    timeout: 0\n  });\n}\n\nvar He = function (e) {\n  return h(/^[0-9a-f]+$/i.test(e), \"Message must be a hex string\"), {\n    message: e\n  };\n},\n    Be = function () {\n  return {\n    authenticate: Ie,\n    unauthenticate: Le,\n    authorization: we,\n    signUserMessage: be,\n    subscribe: ze,\n    snapshot: Fe\n  };\n},\n    Me = function (e) {\n  return Be().authenticate(e);\n},\n    Je = function () {\n  return Be().unauthenticate();\n},\n    Ge = function () {\n  return Be().unauthenticate(), Be().authenticate();\n},\n    qe = function (e) {\n  return Be().authenticate();\n},\n    Ve = function (e) {\n  return Be().authenticate();\n},\n    Ye = Be().authorization,\n    Ze = p;\n\nexport { k as VERSION, Me as authenticate, Ye as authz, Be as currentUser, K as events, Ve as logIn, O as query, Ge as reauthenticate, x as serialize, qe as signUp, Ze as t, M as tx, Je as unauthenticate };","map":{"version":3,"sources":["../src/default-config.js","../src/temp.js","../src/VERSION.js","../src/exec/query.js","../src/serialize/index.js","../src/transaction/index.js","../src/events/index.js","../src/current-user/normalize/__vsn.js","../src/current-user/normalize/frame.js","../src/current-user/normalize/back-channel-rpc.js","../src/current-user/normalize/service.js","../src/current-user/normalize/pre-authz.js","../src/current-user/normalize/authz.js","../src/current-user/normalize/authn.js","../src/current-user/normalize/open-id.js","../src/current-user/normalize/user-signature.js","../src/current-user/build-user.js","../src/current-user/service-of-type.js","../src/current-user/exec-service/strategies/utils/service-endpoint.js","../src/current-user/exec-service/strategies/utils/fetch-service.js","../src/current-user/normalize/polling-response.js","../src/current-user/normalize/composite-signature.js","../src/current-user/exec-service/strategies/utils/render-frame.js","../src/current-user/exec-service/strategies/utils/frame.js","../src/current-user/exec-service/strategies/utils/poll.js","../src/current-user/exec-service/strategies/http-post.js","../src/current-user/exec-service/index.js","../src/current-user/exec-service/strategies/iframe-rpc.js","../src/current-user/index.js","../src/current-user/fetch-services.js","../src/current-user/merge-services.js","../src/fcl.js"],"names":["config","put","resolve","VERSION","isRequired","d","isString","query","opts","preQuery","sdk","cadence","args","limit","then","invariant","ax","t","serialize","resolveFunction","get","defaultResolve","Array","isArray","pipe","interaction","JSON","stringify","createSignableVoucher","fetchTxStatus","transactionId","fclSend","getTransactionStatus","decode","tx","status","isSealed","isExecuted","isFinalized","cur","next","HANDLERS","INIT","ctx","self","setTimeout","sendSelf","merge","SUBSCRIBE","letter","subscribe","from","send","UPDATED","all","UNSUBSCRIBE","unsubscribe","SNAPSHOT","reply","broadcast","scoped","Error","spawnTransaction","spawn","transaction","snapshoter","callback","subscriber","once","predicate","suppress","Promise","reject","unsub","txStatus","statusCode","errorMessage","snapshot","onceFinalized","onceExecuted","onceSealed","isUnknown","isPending","isExpired","scheduleTick","hasSubs","hwm","latestBlock","data","getEvents","height","clearTimeout","spawnEvents","key","events","SERVICE_PRAGMA","f_type","f_vsn","IDENTITY_PRAGMA","USER_PRAGMA","POLLING_RESPONSE_PRAGMA","COMPOSITE_SIGNATURE_PRAGMA","normalizeFrame","service","old","type","endpoint","params","normalizeBackChannelRpc","method","serviceNormalizers","back-channel-rpc","pre-authz","authz","authn","frame","open-id","user-signature","error","console","uid","id","identity","address","withPrefix","addr","keyId","pid","provider","name","icon","deriveCompositeId","rlp","toString","paddr","services","find","normalizeData","fetchServices","hks","code","map","normalizeService","findService","cid","loggedIn","expiresAt","exp","serviceOfType","serviceEndpoint","url","URL","searchParams","append","window","location","origin","Object","entries","fetchService","body","undefined","fetch","headers","Content-Type","json","normalizePollingResponse","resp","reason","compositeSignature","updates","authorizationUpdates","local","normalizeCompositeSignature","sansPrefix","signature","sig","FRAME","src","document","getElementById","$frame","createElement","allow","frameBorder","style","cssText","remove","noop","IGNORE","Set","close","onClose","onMessage","onReady","onResponse","addEventListener","internal","unmount","renderFrame","e","has","removeEventListener","msg","contentWindow","postMessage","parse","OPTIONS","HTTP/GET","HTTP/POST","serviceMethod","poll","canContinue","r","execHttpPost","signable","closeFrame","STRATEGIES","HTTP/RPC","IFRAME/RPC","execService","includeOlderJsonRpcCall","_","jsonrpc","result","_Pact","prototype","onFulfilled","onRejected","state","this","s","_settle","v","SET_CURRENT_USER","DATA","o","_this","value","coldStorage","fallback","stored","sessionStorage","getItem","NAME","removeItem","setItem","pact","canColdStorage","bind","user","notExpired","observer","_isSettledPact","thenable","spawnCurrentUser","Date","now","configLens","regex","fromEntries","where","replace","authenticate","serviceStrategy","app","buildUser","unauthenticate","proposer","payer","authorization","resolvePreAuthz","normalizePreAuthzResponse","axs","push","role","az","tempId","join","signingFunction","authorizer","account","preAuthz","preSignable","sequenceNum","receive","tag","_exit2","expectReply","timeout","makeSignable","test","message","signUserMessage","signingService","log","currentUser","update","stage","shouldContinue","updateValue","_resumeAfterTest","_resumeAfterBody","recover","servicesURL","authorizations","sx1","sx2","reauthenticate","signUp","logIn","types"],"mappings":"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","sourcesContent":["import {config} from \"@onflow/config\"\n\nconfig()\n  .put(\"accessNode.api\", \"http://localhost:8080\")\n  .put(\"challenge.handshake\", \"http://localhost:8700/authenticate\")\n","import {config} from \"@onflow/config\"\nimport {resolve} from \"@onflow/sdk\"\n\nconfig().put(\"sdk.resolve\", resolve)\n","export const VERSION = \"0.0.72\"\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\n// import {send, script, decode, limit, args, arg} from \"@onflow/sdk\"\nimport * as t from \"@onflow/types\"\n\nconst isRequired = d => typeof d != null\nconst isString = d => typeof d === \"string\"\nconst isFunc = d => typeof d === \"function\"\n\n/** Query the Flow Blockchain\n *\n *  @arg {Object} opts         - Query Options and configuration\n *  @arg {string} opts.cadence - Cadence Script used to query Flow\n *  @arg {ArgsFn} opts.args    - Arguments passed to cadence script\n *  @arg {number} opts.limit   - Compute Limit for Query\n *  @returns {Promise<Response>}\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    const cadence = `\n *      cadence: `\n *        pub fun main(a: Int, b: Int, c: Address): Int {\n *          log(c)\n *          return a + b\n *        }\n *    `.trim()\n *\n *    const args = (arg, t) => [\n *      arg(5, t.Int),\n *      arg(7, t.Int),\n *      arg(\"0xb2db43ad6bc345fec9\", t.Address),\n *    ]\n *\n *    await query({ cadence, args })\n */\nexport async function query(opts = {}) {\n  await preQuery(opts)\n\n  // prettier-ignore\n  return sdk.send([\n    sdk.script(opts.cadence),\n    sdk.args(normalizeArgs(opts.args || [])),\n    opts.limit && typeof opts.limit === \"number\" && sdk.limit(opts.limit)\n  ]).then(sdk.decode)\n}\n\nasync function preQuery(opts) {\n  invariant(\n    isRequired(opts.cadence),\n    \"query({ cadence }) -- cadence is required\"\n  )\n\n  invariant(\n    isString(opts.cadence),\n    \"query({ cadence }) -- cadence must be a string\"\n  )\n}\n\nfunction normalizeArgs(ax) {\n  if (isFunc(ax)) return ax(sdk.arg, t)\n  return []\n}\n","import {interaction, pipe} from \"@onflow/sdk\"\nimport {resolve as defaultResolve} from \"@onflow/sdk\"\nimport {createSignableVoucher} from \"@onflow/sdk\"\nimport {config} from \"@onflow/config\"\n\nexport const serialize = async (args = [], opts = {}) => {\n  // prettier-ignore\n  const resolveFunction = await config()\n    .get(\"sdk.resolve\", opts.resolve || defaultResolve(opts))\n\n  if (Array.isArray(args)) args = await pipe(interaction(), args)\n\n  return JSON.stringify(\n    createSignableVoucher(await resolveFunction(args)),\n    null,\n    2\n  )\n}\n","import \"../default-config\"\nimport {config} from \"@onflow/config\"\nimport {\n  spawn,\n  send,\n  subscriber,\n  snapshoter,\n  UPDATED,\n  SNAPSHOT,\n  INIT,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n} from \"@onflow/util-actor\"\nimport {send as fclSend} from \"@onflow/sdk\"\nimport {decode} from \"@onflow/sdk\"\nimport {getTransactionStatus} from \"@onflow/sdk\"\n\nconst RATE = 2500\nconst POLL = \"POLL\"\n\nconst fetchTxStatus = async (transactionId) => {\n  return fclSend([getTransactionStatus(transactionId)]).then(decode)\n}\n\nconst isExpired = (tx) => tx.status === 5\nconst isSealed = (tx) => tx.status >= 4\nconst isExecuted = (tx) => tx.status >= 3\nconst isFinalized = (tx) => tx.status >= 2\nconst isPending = (tx) => tx.status >= 1\nconst isUnknown = (tx) => tx.status >= 0\n\nconst isDiff = (cur, next) => {\n  return JSON.stringify(cur) !== JSON.stringify(next)\n}\n\nconst HANDLERS = {\n  [INIT]: async (ctx) => {\n    const tx = await fetchTxStatus(ctx.self())\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    ctx.merge(tx)\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, ctx.all())\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply(ctx.all())\n  },\n  [POLL]: async (ctx) => {\n    const tx = await fetchTxStatus(ctx.self())\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    if (isDiff(ctx.all(), tx)) ctx.broadcast(UPDATED, tx)\n    ctx.merge(tx)\n  },\n}\n\nconst scoped = (transactionId) => {\n  if (typeof transactionId === \"object\")\n    transactionId = transactionId.transactionId\n  if (transactionId == null) throw new Error(\"transactionId required\")\n  return transactionId\n}\n\nconst spawnTransaction = (transactionId) => {\n  return spawn(HANDLERS, scoped(transactionId))\n}\n\nexport function transaction(transactionId) {\n  function snapshot() {\n    return snapshoter(transactionId, spawnTransaction)\n  }\n\n  function subscribe(callback) {\n    return subscriber(scoped(transactionId), spawnTransaction, callback)\n  }\n\n  function once(predicate) {\n    return function innerOnce(opts = {}) {\n      const suppress = opts.suppress || false\n      return new Promise((resolve, reject) => {\n        const unsub = subscribe((txStatus) => {\n          if (txStatus.statusCode && !suppress) {\n            reject(txStatus.errorMessage)\n            unsub()\n          } else if (predicate(txStatus)) {\n            resolve(txStatus)\n            unsub()\n          }\n        })\n      })\n    }\n  }\n\n  return {\n    snapshot,\n    subscribe,\n    onceFinalized: once(isFinalized),\n    onceExecuted: once(isExecuted),\n    onceSealed: once(isSealed),\n  }\n}\n\ntransaction.isUnknown = isUnknown\ntransaction.isPending = isPending\ntransaction.isFinalized = isFinalized\ntransaction.isExecuted = isExecuted\ntransaction.isSealed = isSealed\ntransaction.isExpired = isExpired\n","import {spawn, subscriber, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {config} from \"@onflow/config\"\nimport {latestBlock} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nimport {send} from \"@onflow/sdk\"\nimport {decode} from \"@onflow/sdk\"\n\nconst RATE = 10000\nconst UPDATED = \"UPDATED\"\nconst TICK = \"TICK\"\n\nconst scheduleTick = async ctx => {\n  return setTimeout(\n    () => ctx.sendSelf(TICK),\n    await config().get(\"fcl.eventPollRate\", RATE)\n  )\n}\n\nconst HANDLERS = {\n  [TICK]: async ctx => {\n    if (!ctx.hasSubs()) return\n    let hwm = ctx.get(\"hwm\")\n    if (hwm == null) {\n      ctx.put(\"hwm\", await latestBlock())\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    } else {\n      let next = await latestBlock()\n      ctx.put(\"hwm\", next)\n      const data = await send([\n        getEvents(ctx.self(), hwm.height, next.height - 1),\n      ]).then(decode)\n      for (let d of data) ctx.broadcast(UPDATED, d.data)\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    }\n  },\n  [SUBSCRIBE]: async (ctx, letter) => {\n    if (!ctx.hasSubs()) {\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    }\n    ctx.subscribe(letter.from)\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n    if (!ctx.hasSubs()) {\n      clearTimeout(ctx.get(\"tick\"))\n      ctx.delete(\"tick\")\n      ctx.delete(\"hwm\")\n    }\n  },\n}\n\nconst spawnEvents = key => spawn(HANDLERS, key)\n\nexport function events(key) {\n  return {\n    subscribe: callback => subscriber(key, spawnEvents, callback),\n  }\n}\n","export const SERVICE_PRAGMA = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const IDENTITY_PRAGMA = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const PROVIDER_PRAGMA = {\n  f_type: \"Provider\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const USER_PRAGMA = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const POLLING_RESPONSE_PRAGMA = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const COMPOSITE_SIGNATURE_PRAGMA = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const OPEN_ID_PRAGMA = {\n  f_type: \"OpenId\",\n  f_vsn: \"1.0.0\",\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"frame\",\n//    \"endpoint\": \"https://rawr\",\n//    \"data\": {},   // Sent to frame when ready\n//    \"params\": {}, // include in query params on frame\n// }\nexport function normalizeFrame(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        old: service,\n        ...SERVICE_PRAGMA,\n        type: \"frame\",\n        endpoint: service.endpoint,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"back-channel-rpc\",\n//    \"endpoint\": \"https://rawr\",\n//    \"method\": \"HTTP/GET\", // HTTP/GET | HTTP/POST\n//    \"data\": {},           // included in body of rpc\n//    \"params\": {},         // included as query params on endpoint url\n// }\nexport function normalizeBackChannelRpc(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: \"back-channel-rpc\",\n        endpoint: service.endpoint,\n        method: service.method,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {normalizeAuthn} from \"./authn\"\nimport {normalizeAuthz} from \"./authz\"\nimport {normalizePreAuthz} from \"./pre-authz\"\nimport {normalizeFrame} from \"./frame\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeOpenId} from \"./open-id\"\nimport {normalizeUserSignature} from \"./user-signature\"\n\nexport function normalizeServices(services, data) {\n  return services.map(service => normalizeService(service, data))\n}\n\nconst serviceNormalizers = {\n  \"back-channel-rpc\": normalizeBackChannelRpc,\n  \"pre-authz\": normalizePreAuthz,\n  authz: normalizeAuthz,\n  authn: normalizeAuthn,\n  frame: normalizeFrame,\n  \"open-id\": normalizeOpenId,\n  \"user-signature\": normalizeUserSignature,\n}\n\nexport function normalizeService(service, data) {\n  try {\n    var normalized = serviceNormalizers[service.type](service, data)\n    return normalized\n  } catch (error) {\n    console.error(\n      `Unrecognized FCL Service Type [${service.type}]`,\n      service,\n      error\n    )\n    return service\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"pre-authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of pre-authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizePreAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"identity\": {\n//     \"address\": \"0x____\"\n//   },\n//   \"provider\": {\n//     \"address\": \"0x____\",\n//     \"name\": \"Best Wallet\",\n//     \"description\": \"The Best Wallet\"\n//     \"icon\": \"https://\",\n//   }\n// }\nexport function normalizeAuthn(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.authn,\n        id: service.pid,\n        provider: {\n          address: withPrefix(service.addr),\n          name: service.name,\n          icon: service.icon,\n        },\n      }\n  }\n}\n","import {SERVICE_PRAGMA, OPEN_ID_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"open-id\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"method: \"data\",\n//   \"data\": {\n//      \"profile\": {\n//        \"name\": \"Bob\",\n//        \"family_name\": \"Builder\",\n//        \"given_name\": \"Robert\",\n//        \"middle_name\": \"the\",\n//        \"nickname\": \"Bob the Builder\",\n//        \"perferred_username\": \"bob\",\n//        \"profile\": \"https://www.bobthebuilder.com/\",\n//        \"picture\": \"https://avatars.onflow.org/avatar/bob\",\n//        \"gender\": \"...\",\n//        \"birthday\": \"2001-01-18\",\n//        \"zoneinfo\": \"America/Vancouver\",\n//        \"locale\": \"en-us\",\n//        \"updated_at\": \"1614970797388\"\n//      },\n//      \"email\": {\n//        \"email\": \"bob@bob.bob\",\n//        \"email_verified\": true\n//      },\n//      \"address\": {\n//        \"address\": \"One Apple Park Way, Cupertino, CA 95014, USA\"\n//      },\n//      \"phone\": {\n//        \"phone_number\": \"+1 (xxx) yyy-zzzz\",\n//        \"phone_number_verified\": true\n//      },\n//      \"social\": {\n//        \"twitter\": \"@_qvvg\",\n//        \"twitter_verified\": true\n//      },\n//   }\n// }\nexport function normalizeOpenId(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return null\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"user-signature\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"IFRAME/RPC\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"data\": {}, // included in body of user-signature request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeUserSignature(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      throw new Error(\"Invalid user-signature service\")\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport * as rlp from \"@onflow/rlp\"\nimport {fetchServices} from \"./fetch-services\"\nimport {mergeServices} from \"./merge-services\"\nimport {USER_PRAGMA} from \"./normalize/__vsn\"\nimport {normalizeService} from \"./normalize/service\"\n\nfunction deriveCompositeId(authn) {\n  return rlp\n    .encode([\n      authn.provider.address || authn.provider.name || \"UNSPECIFIED\",\n      authn.id,\n    ])\n    .toString(\"hex\")\n}\n\nfunction normalizeData(data) {\n  data.addr = data.addr ? withPrefix(data.addr) : null\n  data.paddr = data.paddr ? withPrefix(data.paddr) : null\n  return data\n}\n\nfunction findService(type, services) {\n  return services.find(d => d.type === type)\n}\n\nexport async function buildUser(data) {\n  data = normalizeData(data)\n\n  var services = mergeServices(\n    data.services || [],\n    await fetchServices(data.hks, data.code)\n  ).map(service => normalizeService(service, data))\n\n  const authn = findService(\"authn\", services)\n\n  return {\n    ...USER_PRAGMA,\n    addr: withPrefix(data.addr),\n    cid: deriveCompositeId(authn),\n    loggedIn: true,\n    services: services,\n    expiresAt: data.exp,\n  }\n}\n","export function serviceOfType(services = [], type) {\n  return services.find(service => service.type === type)\n}\n","export function serviceEndpoint(service) {\n  const url = new URL(service.endpoint)\n  url.searchParams.append(\"l6n\", window.location.origin)\n  if (service.params != null) {\n    for (let [key, value] of Object.entries(service.params || {})) {\n      url.searchParams.append(key, value)\n    }\n  }\n  return url\n}\n","import {serviceEndpoint} from \"./service-endpoint\"\n\nexport function fetchService(service, opts = {}) {\n  const method = opts.method || \"POST\"\n  const body =\n    method === \"GET\"\n      ? undefined\n      : JSON.stringify(opts.data || service.data || {})\n\n  return fetch(serviceEndpoint(service), {\n    method: method,\n    headers: {\n      ...(service.headers || {}),\n      ...(opts.headers || {}),\n      \"Content-Type\": \"application/json\",\n    },\n    body: body,\n  }).then((d) => d.json())\n}\n","import {POLLING_RESPONSE_PRAGMA} from \"./__vsn\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeFrame} from \"./frame\"\n\n// {\n//    \"f_type\": \"PollingResponse\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"status\": \"PENDING\", // PENDING | APPROVED | DECLINED\n//    \"reason\": null,      // Reason for Declining Transaction\n//    \"data\": null,        // Return value for APPROVED\n//    \"updates\": BackChannelRpc,\n//    \"local\": Frame,\n// }\nexport function normalizePollingResponse(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...POLLING_RESPONSE_PRAGMA,\n        status: resp.status,\n        reason: resp.reason,\n        data: resp.compositeSignature || resp.data || {},\n        updates: normalizeBackChannelRpc(resp.authorizationUpdates),\n        local: normalizeFrame((resp.local || [])[0]),\n      }\n  }\n}\n","import {COMPOSITE_SIGNATURE_PRAGMA} from \"./__vsn\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\n// {\n//    \"f_type\": \"CompositeSignature\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"addr\": \"_____\",         // sans-prefix\n//    \"signature\": \"adfe1234\", // hex\n//    \"keyId\": 3,\n// }\nexport function normalizeCompositeSignature(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...COMPOSITE_SIGNATURE_PRAGMA,\n        addr: sansPrefix(resp.addr || resp.address),\n        signature: resp.signature || resp.sig,\n        keyId: resp.keyId,\n      }\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\n\nconst FRAME = \"FCL_IFRAME\"\n\nconst FRAME_STYLES = `\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100vh;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n`\n\nexport function renderFrame(src) {\n  invariant(\n    !document.getElementById(FRAME),\n    \"Attempt at triggering multiple Frames\",\n    {src}\n  )\n\n  const $frame = document.createElement(\"iframe\")\n  $frame.src = src\n  $frame.id = FRAME\n  $frame.allow = \"usb *; hid *\"\n  $frame.frameBorder = \"0\"\n  $frame.style.cssText = FRAME_STYLES\n  document.body.append($frame)\n\n  const unmount = () => {\n    if (document.getElementById(FRAME)) {\n      document.getElementById(FRAME).remove()\n    }\n  }\n\n  return [$frame, unmount]\n}\n","import {renderFrame} from \"./render-frame\"\nimport {serviceEndpoint} from \"./service-endpoint\"\n\nconst CLOSE_EVENT = \"FCL:FRAME:CLOSE\"\nconst READY_EVENT = \"FCL:FRAME:READY\"\nconst RESPONSE_EVENT = \"FCL:FRAME:RESPONSE\"\nconst OPEN_EVENT = \"FCL:FRAME:OPEN\"\n\nconst noop = () => {}\n\nconst IGNORE = new Set([\n  \"monetizationstart\",\n  \"monetizationpending\",\n  \"monetizationprogress\",\n  \"monetizationstop\",\n])\n\nexport function frame(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  var tab = null\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  window.addEventListener(\"message\", internal)\n  const [$frame, unmount] = renderFrame(serviceEndpoint(service))\n  return {send, close}\n\n  function internal(e) {\n    try {\n      if (typeof e.data !== \"object\") return\n      if (IGNORE.has(e.data.type)) return\n      if (e.data.type === CLOSE_EVENT) close()\n      if (e.data.type === READY_EVENT) onReady(e, {send, close})\n      if (e.data.type === RESPONSE_EVENT) onResponse(e, {send, close})\n      onMessage(e, {send, close})\n\n      // Backwards Compatible\n      if (e.data.type === \"FCL::CHALLENGE::RESPONSE\") {\n        onResponse(e, {send, close})\n      }\n      if (e.data.type === \"FCL::AUTHZ_READY\") onReady(e, {send, close})\n      if (e.data.type === \"FCL::CHALLENGE::CANCEL\") close()\n      if (e.data.type === \"FCL::CANCEL\") close()\n    } catch (error) {\n      console.error(\"Frame Callback Error\", error)\n      close()\n    }\n  }\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", internal)\n      if (tab != null) tab.close()\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Frame Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      $frame.contentWindow.postMessage(\n        JSON.parse(JSON.stringify(msg || {})),\n        \"*\"\n      )\n    } catch (error) {\n      console.error(\"Frame Send Error\", msg, error)\n    }\n  }\n\n  function open(msg) {\n    try {\n      tab = window.open(msg.endpoint)\n      tab.focus()\n    } catch (error) {\n      console.error(\"Frame Open Error\", msg, error)\n    }\n  }\n}\n","import {normalizePollingResponse} from \"../../../normalize/polling-response\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {fetchService} from \"./fetch-service\"\n\nconst OPTIONS = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\",\n}\n\nconst serviceMethod = service => {\n  invariant(\n    OPTIONS[service.method],\n    \"Invalid Service Method for type back-channel-rpc\",\n    {service}\n  )\n  return OPTIONS[service.method]\n}\n\nconst serviceBody = service => {\n  if (service.method === \"HTTP/GET\") return undefined\n  if (service.method === \"HTTP/POST\" && service.data != null)\n    return JSON.stringify(service.data)\n  return undefined\n}\n\nexport async function poll(service, canContinue = () => true) {\n  invariant(service, \"Missing Polling Service\", {service})\n  if (!canContinue()) throw new Error(\"Externally Halted\")\n\n  const resp = await fetchService(service, {\n    method: serviceMethod(service),\n  }).then(normalizePollingResponse)\n\n  switch (resp.status) {\n    case \"APPROVED\":\n      return resp.data\n    case \"DECLINED\":\n      throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n    default:\n      await new Promise(r => setTimeout(r, 500))\n      return poll(resp.updates, canContinue)\n  }\n}\n","import {fetchService} from \"./utils/fetch-service\"\nimport {serviceEndpoint} from \"./utils/service-endpoint\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {normalizeCompositeSignature} from \"../../normalize/composite-signature\"\nimport {frame} from \"./utils/frame\"\nimport {poll} from \"./utils/poll\"\n\nexport async function execHttpPost(service, signable, opts) {\n  signable.data = service.data\n  const resp = await fetchService(service, {\n    data: signable,\n  }).then(normalizePollingResponse)\n\n  if (resp.status === \"APPROVED\") {\n    return resp.data\n  } else if (resp.status === \"DECLINED\") {\n    throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n  } else if (resp.status === \"PENDING\") {\n    var canContinue = true\n    const {close: closeFrame} = frame(resp.local, {\n      onClose() {\n        canContinue = false\n      },\n    })\n\n    return poll(resp.updates, () => canContinue)\n      .then(compositeSignature => {\n        closeFrame()\n        return normalizeCompositeSignature(compositeSignature)\n      })\n      .catch(error => {\n        console.error(error)\n        closeFrame()\n        throw error\n      })\n  } else {\n    console.error(`Auto Decline: Invalid Response`, {service, resp})\n    throw new Error(`Auto Decline: Invalid Response`)\n  }\n}\n","import {execHttpPost} from \"./strategies/http-post\"\nimport {execIframeRPC} from \"./strategies/iframe-rpc\"\n\nconst STRATEGIES = {\n  \"HTTP/RPC\": execHttpPost,\n  \"HTTP/POST\": execHttpPost,\n  \"IFRAME/RPC\": execIframeRPC,\n}\n\nexport async function execService(service, msg, opts = {}) {\n  try {\n    return STRATEGIES[service.method](service, msg, opts)\n  } catch (error) {\n    console.error(\"execService(service, msg)\", error, {service, msg, opts})\n    throw error\n  }\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {frame} from \"./utils/frame\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {normalizeCompositeSignature} from \"../../normalize/composite-signature\"\n\nexport function execIframeRPC(service, body, opts) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    const includeOlderJsonRpcCall = opts.includeOlderJsonRpcCall\n\n    body.data = service.data\n\n    frame(service, {\n      onReady(_, {send}) {\n        try {\n          send({\n            type: \"FCL:FRAME:READY:RESPONSE\",\n            body,\n            service: {\n              params: service.params,\n              data: service.data,\n            },\n          })\n          if (includeOlderJsonRpcCall) {\n            send({\n              jsonrpc: \"2.0\",\n              id: id,\n              method: \"fcl:sign\",\n              params: [body, service.params],\n            })\n          }\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onResponse(e, {send, close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          const resp = normalizePollingResponse(e.data)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(normalizeCompositeSignature(resp.data))\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onResponse error\", error)\n          throw error\n        }\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(normalizeCompositeSignature(resp.data))\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onMessage error\", error)\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n    })\n  })\n}\n","import \"../default-config\"\nimport {account} from \"@onflow/sdk\"\nimport {config} from \"@onflow/config\"\nimport {spawn, send, INIT, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {buildUser} from \"./build-user\"\nimport {serviceOfType} from \"./service-of-type\"\nimport {execService} from \"./exec-service\"\nimport {frame} from \"./exec-service/strategies/utils/frame\"\n\nconst NAME = \"CURRENT_USER\"\nconst UPDATED = \"CURRENT_USER/UPDATED\"\nconst SNAPSHOT = \"SNAPSHOT\"\nconst SET_CURRENT_USER = \"SET_CURRENT_USER\"\nconst DEL_CURRENT_USER = \"DEL_CURRENT_USER\"\n\nconst DATA = `{\n  \"f_type\": \"User\",\n  \"f_vsn\": \"1.0.0\",\n  \"addr\":null,\n  \"cid\":null,\n  \"loggedIn\":null,\n  \"expiresAt\":null,\n  \"services\":[]\n}`\n\nconst coldStorage = {\n  get: async () => {\n    const fallback = JSON.parse(DATA)\n    const stored = JSON.parse(sessionStorage.getItem(NAME))\n    if (stored != null && fallback[\"f_vsn\"] !== stored[\"f_vsn\"]) {\n      sessionStorage.removeItem(NAME)\n      return fallback\n    }\n    return stored || fallback\n  },\n  put: async data => {\n    sessionStorage.setItem(NAME, JSON.stringify(data))\n    return data\n  },\n}\n\nconst canColdStorage = () => {\n  return config().get(\"persistSession\", true)\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    ctx.merge(JSON.parse(DATA))\n    if (await canColdStorage()) {\n      const user = await coldStorage.get()\n      if (notExpired(user)) ctx.merge(user)\n    }\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [SET_CURRENT_USER]: async (ctx, letter, data) => {\n    ctx.merge(data)\n    if (await canColdStorage()) coldStorage.put(ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DEL_CURRENT_USER]: async (ctx, letter) => {\n    ctx.merge(JSON.parse(DATA))\n    if (await canColdStorage()) coldStorage.put(ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n}\n\nconst identity = v => v\nconst spawnCurrentUser = () => spawn(HANDLERS, NAME)\n\nfunction notExpired(user) {\n  return (\n    user.expiresAt == null ||\n    user.expiresAt === 0 ||\n    user.expiresAt > Date.now()\n  )\n}\n\nasync function configLens(regex) {\n  return Object.fromEntries(\n    Object.entries(await config().where(regex)).map(([key, value]) => [\n      key.replace(regex, \"\"),\n      value,\n    ])\n  )\n}\n\nasync function authenticate(opts = {}) {\n  return new Promise(async (resolve, reject) => {\n    spawnCurrentUser()\n    const user = await snapshot()\n    if (user.loggedIn && notExpired(user)) return resolve(user)\n    const serviceStrategy = opts.serviceStrategy || frame\n\n    serviceStrategy(\n      {\n        endpoint:\n          (await config().get(\"discovery.wallet\")) ||\n          (await config().get(\"challenge.handshake\")),\n      },\n      {\n        async onReady(e, {send, close}) {\n          send({\n            type: \"FCL:AUTHN:CONFIG\",\n            services: await configLens(/^service\\./),\n            app: await configLens(/^app\\.detail\\./),\n          })\n        },\n        async onClose() {\n          resolve(await snapshot())\n        },\n        async onResponse(e, {close}) {\n          send(NAME, SET_CURRENT_USER, await buildUser(e.data))\n          resolve(await snapshot())\n          close()\n        },\n      }\n    )\n  })\n}\n\nfunction unauthenticate() {\n  spawnCurrentUser()\n  send(NAME, DEL_CURRENT_USER)\n}\n\nconst normalizePreAuthzResponse = authz => ({\n  f_type: \"PreAuthzResponse\",\n  f_vsn: \"1.0.0\",\n  proposer: (authz || {}).proposer,\n  payer: (authz || {}).payer || [],\n  authorization: (authz || {}).authorization || [],\n})\n\nfunction resolvePreAuthz(authz) {\n  const resp = normalizePreAuthzResponse(authz)\n  const axs = []\n\n  if (resp.proposer != null) axs.push([\"PROPOSER\", resp.proposer])\n  for (let az of resp.payer || []) axs.push([\"PAYER\", az])\n  for (let az of resp.authorization || []) axs.push([\"AUTHORIZER\", az])\n\n  var result = axs.map(([role, az]) => ({\n    tempId: [az.identity.address, az.identity.keyId].join(\"|\"),\n    addr: az.identity.address,\n    keyId: az.identity.keyId,\n    signingFunction(signable) {\n      return execService(az, signable)\n    },\n    role: {\n      proposer: role === \"PROPOSER\",\n      payer: role === \"PAYER\",\n      authorizer: role === \"AUTHORIZER\",\n    },\n  }))\n  return result\n}\n\nasync function authorization(account) {\n  spawnCurrentUser()\n  const user = await authenticate()\n  const authz = serviceOfType(user.services, \"authz\")\n\n  const preAuthz = serviceOfType(user.services, \"pre-authz\")\n  if (preAuthz) {\n    return {\n      ...account,\n      tempId: \"CURRENT_USER\",\n      async resolve(account, preSignable) {\n        return resolvePreAuthz(await execService(preAuthz, preSignable))\n      },\n    }\n  }\n\n  return {\n    ...account,\n    tempId: \"CURRENT_USER\",\n    resolve: null,\n    addr: sansPrefix(authz.identity.address),\n    keyId: authz.identity.keyId,\n    sequenceNum: null,\n    signature: null,\n    async signingFunction(signable) {\n      return execService(authz, signable, {\n        includeOlderJsonRpcCall: true,\n      })\n    },\n  }\n}\n\nfunction subscribe(callback) {\n  spawnCurrentUser()\n  const EXIT = \"@EXIT\"\n  const self = spawn(async ctx => {\n    ctx.send(NAME, SUBSCRIBE)\n    while (1) {\n      const letter = await ctx.receive()\n      if (letter.tag === EXIT) {\n        ctx.send(NAME, UNSUBSCRIBE)\n        return\n      }\n      callback(letter.data)\n    }\n  })\n  return () => send(self, EXIT)\n}\n\nfunction snapshot() {\n  spawnCurrentUser()\n  return send(NAME, SNAPSHOT, null, {expectReply: true, timeout: 0})\n}\n\nasync function info() {\n  spawnCurrentUser()\n  const {addr} = await snapshot()\n  if (addr == null) throw new Error(\"No Flow Address for Current User\")\n  return account(addr)\n}\n\nconst makeSignable = msg => {\n  invariant(/^[0-9a-f]+$/i.test(msg), \"Message must be a hex string\")\n\n  return {\n    message: msg,\n  }\n}\n\nasync function signUserMessage(msg, opts = {}) {\n  spawnCurrentUser()\n  const user = await authenticate(opts)\n  const signingService = serviceOfType(user.services, \"user-signature\")\n\n  invariant(\n    signingService,\n    \"Current user must have authorized a signing service.\"\n  )\n\n  try {\n    return await execService(signingService, makeSignable(msg))\n  } catch (error) {\n    console.log(error)\n  }\n}\n\nexport const currentUser = () => {\n  return {\n    authenticate,\n    unauthenticate,\n    authorization,\n    signUserMessage,\n    subscribe,\n    snapshot,\n  }\n}\n","export async function fetchServices(servicesURL, code) {\n  if (servicesURL == null || code == null) return []\n\n  const url = new URL(servicesURL)\n  url.searchParams.append(\"code\", code)\n\n  const resp = await fetch(url, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  }).then(d => d.json())\n\n  if (Array.isArray(resp)) return resp\n\n  // Backwards compatibility for First-Gen Wallet Providers\n  const services = []\n\n  // Convert authorizations into authz services\n  if (Array.isArray(resp.authorizations)) {\n    for (let service of resp.authorizations) {\n      services.push({\n        type: \"authz\",\n        keyId: resp.keyId,\n        ...service,\n      })\n    }\n  }\n\n  // Convert Provider info into an authn service\n  if (resp.provider != null) {\n    services.push({\n      type: \"authn\",\n      id: \"wallet-provider#authn\",\n      ...resp.provider,\n    })\n  }\n\n  return services\n}\n","import {withPrefix} from \"@onflow/util-address\"\n\nexport function mergeServices(sx1 = [], sx2 = []) {\n  // TODO: Make this smarter\n  return [...sx1, ...sx2]\n}\n","import \"./default-config\"\nimport \"./temp\"\nexport {VERSION} from \"./VERSION\"\nexport {query} from \"./exec/query\"\nexport {serialize} from \"./serialize\"\nexport {transaction as tx} from \"./transaction\"\nexport {events} from \"./events\"\n\nimport {currentUser} from \"./current-user\"\nexport {currentUser}\n\nexport const authenticate = opts => currentUser().authenticate(opts)\nexport const unauthenticate = () => currentUser().unauthenticate()\nexport const reauthenticate = () => {\n  currentUser().unauthenticate()\n  return currentUser().authenticate()\n}\nexport const signUp = opts => currentUser().authenticate()\nexport const logIn = opts => currentUser().authenticate()\n\nexport const authz = currentUser().authorization\n\nimport * as types from \"@onflow/types\"\nexport const t = types\n\nexport {config} from \"@onflow/config\"\nexport {send} from \"@onflow/sdk\"\nexport {decode} from \"@onflow/sdk\"\nexport {account} from \"@onflow/sdk\"\nexport {latestBlock} from \"@onflow/sdk\"\nexport {isOk, isBad, why, pipe, build} from \"@onflow/sdk\"\nexport {withPrefix, sansPrefix, display} from \"@onflow/util-address\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\nexport {createSignableVoucher} from \"@onflow/sdk\"\n\n// builders\nexport {transaction} from \"@onflow/sdk\"\nexport {script} from \"@onflow/sdk\"\nexport {ping} from \"@onflow/sdk\"\nexport {atBlockHeight} from \"@onflow/sdk\"\nexport {atBlockId} from \"@onflow/sdk\"\nexport {getAccount} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nexport {getEventsAtBlockHeightRange} from \"@onflow/sdk\"\nexport {getEventsAtBlockIds} from \"@onflow/sdk\"\nexport {getLatestBlock} from \"@onflow/sdk\"\nexport {getBlock} from \"@onflow/sdk\"\nexport {getBlockHeader} from \"@onflow/sdk\"\nexport {getBlockById} from \"@onflow/sdk\"\nexport {getBlockByHeight} from \"@onflow/sdk\"\nexport {getCollection} from \"@onflow/sdk\"\nexport {getTransactionStatus} from \"@onflow/sdk\"\nexport {getTransaction} from \"@onflow/sdk\"\nexport {authorizations, authorization} from \"@onflow/sdk\"\nexport {args, arg} from \"@onflow/sdk\"\nexport {proposer} from \"@onflow/sdk\"\nexport {payer} from \"@onflow/sdk\"\nexport {limit} from \"@onflow/sdk\"\nexport {ref} from \"@onflow/sdk\"\nexport {params, param} from \"@onflow/sdk\"\nexport {validator} from \"@onflow/sdk\"\nexport {invariant} from \"@onflow/sdk\"\n"]},"metadata":{},"sourceType":"module"}