{"ast":null,"code":"var _jsxFileName = \"/Users/minh/Desktop/TestSite/wc-prototype/src/pages/components/DisplayMintPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport * as fcl from \"@onflow/fcl\";\nimport * as t from \"@onflow/types\";\nimport { Link } from 'react-router-dom';\nimport MetaMintPage from \"../MetaMintPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DisplayMintPage = () => {\n  _s();\n\n  const [mintUsers, setMintUsers] = useState(false);\n\n  const checkAccount = async () => {\n    let snapshot = await fcl.currentUser().snapshot();\n    console.log(\"Snapshot: \" + snapshot);\n    let addrVal = await snapshot.addr;\n    console.log(\"addrVal: \" + addrVal);\n\n    if (addrVal != null) {\n      const encoded = await fcl.send([fcl.script`\n        import WildNFT from 0xProfile\n\n        pub fun main(addr: Address) : Bool {\n        let account = getAccount(0x31e5c196739629db)\n        let capability = account.getCapability(/public/AccessList) \n        let ref = capability.borrow<&{WildNFT.NFTMinterAccessPub}>() \n            ?? panic(\"Could not borrow account access list reference\")\n        let minterList = ref.getAccounts()\n\n        return minterList.contains(addr)\n      }       \n      `, fcl.args([fcl.arg(addrVal, t.Address)])]);\n      const decoded = await fcl.decode(encoded);\n      console.log(\"Decode: \" + decoded);\n      setMintUsers(decoded);\n    }\n  };\n\n  useEffect(() => {\n    checkAccount();\n  }, [mintUsers]);\n\n  if (mintUsers) {\n    console.log(\"User Approved\");\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: {\n          pathname: \"/MetaMintPage\",\n          state: {\n            auth: true\n          }\n        },\n        children: \"Mint an NFT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }, this);\n  } else {\n    return null;\n  }\n};\n\n_s(DisplayMintPage, \"UDuadsqxMNTEBnLJNHvR4n4KYds=\");\n\n_c = DisplayMintPage;\nexport default DisplayMintPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"DisplayMintPage\");","map":{"version":3,"sources":["/Users/minh/Desktop/TestSite/wc-prototype/src/pages/components/DisplayMintPage.js"],"names":["React","useEffect","useState","fcl","t","Link","MetaMintPage","DisplayMintPage","mintUsers","setMintUsers","checkAccount","snapshot","currentUser","console","log","addrVal","addr","encoded","send","script","args","arg","Address","decoded","decode","pathname","state","auth"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,KAAKC,GAAZ,MAAqB,aAArB;AACA,OAAO,KAAKC,CAAZ,MAAmB,eAAnB;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,OAAOC,YAAP,MAAyB,iBAAzB;;;AAEA,MAAMC,eAAe,GAAG,MAAM;AAAA;;AAC9B,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,KAAD,CAA1C;;AAEA,QAAMQ,YAAY,GAAG,YAAY;AAC7B,QAAIC,QAAQ,GAAG,MAAMR,GAAG,CAACS,WAAJ,GAAkBD,QAAlB,EAArB;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAeH,QAA3B;AACA,QAAII,OAAO,GAAG,MAAMJ,QAAQ,CAACK,IAA7B;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAcC,OAA1B;;AACA,QAAGA,OAAO,IAAI,IAAd,EAAmB;AACnB,YAAME,OAAO,GAAG,MAAMd,GAAG,CACtBe,IADmB,CACd,CACJf,GAAG,CAACgB,MAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAbY,EAaJhB,GAAG,CAACiB,IAAJ,CACA,CAACjB,GAAG,CAACkB,GAAJ,CAAQN,OAAR,EAAiBX,CAAC,CAACkB,OAAnB,CAAD,CADA,CAbI,CADc,CAAtB;AAiBE,YAAMC,OAAO,GAAG,MAAMpB,GAAG,CAACqB,MAAJ,CAAWP,OAAX,CAAtB;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAaS,OAAzB;AACAd,MAAAA,YAAY,CAACc,OAAD,CAAZ;AACD;AACJ,GA3BD;;AA4BAtB,EAAAA,SAAS,CAAC,MAAM;AACdS,IAAAA,YAAY;AACb,GAFQ,EAEN,CAACF,SAAD,CAFM,CAAT;;AAGA,MAAGA,SAAH,EAAa;AACXK,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,wBACE;AAAA,6BAAI,QAAC,IAAD;AAAM,QAAA,EAAE,EAAE;AACZW,UAAAA,QAAQ,EAAE,eADE;AAEZC,UAAAA,KAAK,EAAE;AAACC,YAAAA,IAAI,EAAE;AAAP;AAFK,SAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAJ;AAAA;AAAA;AAAA;AAAA,YADF;AAMD,GARD,MASI;AACF,WAAO,IAAP;AACD;AACA,CA9CD;;GAAMpB,e;;KAAAA,e;AAgDN,eAAeA,eAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as fcl from \"@onflow/fcl\";\nimport * as t from \"@onflow/types\";\nimport {Link} from 'react-router-dom';\nimport MetaMintPage from \"../MetaMintPage\";\n\nconst DisplayMintPage = () => {\nconst [mintUsers, setMintUsers] = useState(false)\n\nconst checkAccount = async () => {\n    let snapshot = await fcl.currentUser().snapshot()\n    console.log(\"Snapshot: \" + snapshot)\n    let addrVal = await snapshot.addr\n    console.log(\"addrVal: \" + addrVal)\n    if(addrVal != null){\n    const encoded = await fcl\n      .send([\n        fcl.script`\n        import WildNFT from 0xProfile\n\n        pub fun main(addr: Address) : Bool {\n        let account = getAccount(0x31e5c196739629db)\n        let capability = account.getCapability(/public/AccessList) \n        let ref = capability.borrow<&{WildNFT.NFTMinterAccessPub}>() \n            ?? panic(\"Could not borrow account access list reference\")\n        let minterList = ref.getAccounts()\n\n        return minterList.contains(addr)\n      }       \n      `,fcl.args( \n        [fcl.arg(addrVal, t.Address)])\n      ])\n      const decoded = await fcl.decode(encoded)\n      console.log(\"Decode: \" + decoded)\n      setMintUsers(decoded)\n    }\n};\nuseEffect(() => {\n  checkAccount();\n}, [mintUsers]);\nif(mintUsers){\n  console.log(\"User Approved\")\n  return (\n    <li><Link to={{\n      pathname: \"/MetaMintPage\", \n      state: {auth: true}\n    }}>Mint an NFT</Link></li>\n  )\n}\nelse{\n  return null\n}\n};\n\nexport default DisplayMintPage;"]},"metadata":{},"sourceType":"module"}