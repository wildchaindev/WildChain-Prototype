{"ast":null,"code":"var _jsxFileName = \"/Users/minh/Desktop/TestSite/wc-prototype/src/pages/components/TokenDataMarketSell.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport * as fcl from \"@onflow/fcl\";\nimport * as t from \"@onflow/types\";\nimport defaultLogo from \"../../assets/img/WildChainImgs/WildChain-logo-long.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TokenDataMarketSell = props => {\n  _s();\n\n  const [nftInfo, setNftInfo] = useState(null); // Using this function for displaying ipfs content\n\n  function showImg(s) {\n    let arr = s.split(\"ipfs://\"); //console.log(arr);\n\n    if (s.split(\"ipfs://\").length === 2) {\n      let link = \"https://ipfs.io/ipfs/\" + arr[1]; //console.log(link);\n\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"gridIcon\",\n        src: link,\n        alt: \"Giraffe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 11\n      }, this);\n    }\n  }\n\n  const fetchTokenData = async () => {\n    let testAddr = props.account; //console.log(\"Prop ID: \" + props.nftID)\n\n    let testID = parseInt(props.nftID);\n\n    try {\n      const encoded = await fcl.send([fcl.script`\n        import Marketplace from 0xProfile\n\n        pub fun main(account: Address, nftId: UInt64) : {String : String} {\n          // Account that owns the NFT. \n          // In this case, this is the same account as the one that minted the NFT and deployed the contract.\n          let nftOwner = getAccount(account)\n          log(\"NFT Owner\")\n          // Simply borrows all capabilities that are available by access levels as defined by the contract\n          let capability = nftOwner.getCapability(/public/NFTSale)\n      \n          // Pull out the \"borrow()\" capability to get the script to borrow from the deployed contract\n          let receiverRef = capability.borrow<&{Marketplace.SalePublic}>()\n              ?? panic(\"Could not borrow the receiver reference\")\n      \n          // At this point, we can use any functions available by capabilities as defined by the contract\n          // Thus, call the getMetadata function.\n          // For the sake of this test, just getting metadata for the NFT with id 1.\n          return receiverRef.getMetadata(id: nftId)\n      }       \n      `, fcl.args([fcl.arg(testAddr, t.Address), fcl.arg(testID, t.UInt64)])]); //console.log(\"Data Type: \" + typeof(fcl.authz()))\n      //console.log(fcl.authz().addr)\n      //let testVal = await fcl.authz()\n      //console.log(\"TestVal: \" + await testVal.addr)\n\n      const decoded = await fcl.decode(encoded); //console.log(\"Decode: \" + decoded)\n\n      setNftInfo(decoded); //console.log(\"NFT Info: \" + nftInfo)\n      //console.log(\"NFT Info: \" + nftInfo[\"uri\"])\n      //console.log(nftInfo)\n    } catch (error) {\n      console.log(\"NFT not found\");\n    }\n  };\n\n  useEffect(() => {\n    fetchTokenData();\n  }, [props.account, props.nftID]);\n\n  if (nftInfo != null) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"token-data\",\n      children: showImg(nftInfo[\"uri\"])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this);\n  } else return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"column\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      id: \"gridIcon\",\n      src: defaultLogo,\n      alt: \"NFT Sold\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"center\",\n      children: \"NFT Sold\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 3\n  }, this);\n};\n\n_s(TokenDataMarketSell, \"IxWTcUXSO+ZRqJLxD2zfcLDLOFw=\");\n\n_c = TokenDataMarketSell;\nexport default TokenDataMarketSell;\n\nvar _c;\n\n$RefreshReg$(_c, \"TokenDataMarketSell\");","map":{"version":3,"sources":["/Users/minh/Desktop/TestSite/wc-prototype/src/pages/components/TokenDataMarketSell.js"],"names":["React","useEffect","useState","fcl","t","defaultLogo","TokenDataMarketSell","props","nftInfo","setNftInfo","showImg","s","arr","split","length","link","fetchTokenData","testAddr","account","testID","parseInt","nftID","encoded","send","script","args","arg","Address","UInt64","decoded","decode","error","console","log"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAO,KAAKC,GAAZ,MAAqB,aAArB;AACA,OAAO,KAAKC,CAAZ,MAAmB,eAAnB;AACA,OAAOC,WAAP,MAAwB,wDAAxB;;;AAEA,MAAMC,mBAAmB,GAAIC,KAAD,IAAW;AAAA;;AACrC,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,CAAC,IAAD,CAAtC,CADqC,CAGrC;;AACA,WAASQ,OAAT,CAAiBC,CAAjB,EAAoB;AAClB,QAAIC,GAAG,GAAGD,CAAC,CAACE,KAAF,CAAQ,SAAR,CAAV,CADkB,CAElB;;AACA,QAAGF,CAAC,CAACE,KAAF,CAAQ,SAAR,EAAmBC,MAAnB,KAA8B,CAAjC,EAAmC;AACjC,UAAIC,IAAI,GAAG,0BAAwBH,GAAG,CAAC,CAAD,CAAtC,CADiC,CAEjC;;AACA,0BACI;AAAK,QAAA,EAAE,EAAC,UAAR;AAAmB,QAAA,GAAG,EAAEG,IAAxB;AAA8B,QAAA,GAAG,EAAC;AAAlC;AAAA;AAAA;AAAA;AAAA,cADJ;AAGD;AACF;;AAED,QAAMC,cAAc,GAAG,YAAY;AACjC,QAAIC,QAAQ,GAAGV,KAAK,CAACW,OAArB,CADiC,CAEjC;;AACA,QAAIC,MAAM,GAAGC,QAAQ,CAACb,KAAK,CAACc,KAAP,CAArB;;AACA,QAAI;AACJ,YAAMC,OAAO,GAAG,MAAMnB,GAAG,CACtBoB,IADmB,CACd,CACJpB,GAAG,CAACqB,MAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OArBY,EAsBNrB,GAAG,CAACsB,IAAJ,CACE,CAACtB,GAAG,CAACuB,GAAJ,CAAQT,QAAR,EAAkBb,CAAC,CAACuB,OAApB,CAAD,EACAxB,GAAG,CAACuB,GAAJ,CAAQP,MAAR,EAAgBf,CAAC,CAACwB,MAAlB,CADA,CADF,CAtBM,CADc,CAAtB,CADI,CA4BJ;AACA;AACA;AACA;;AACA,YAAMC,OAAO,GAAG,MAAM1B,GAAG,CAAC2B,MAAJ,CAAWR,OAAX,CAAtB,CAhCI,CAiCJ;;AACAb,MAAAA,UAAU,CAACoB,OAAD,CAAV,CAlCI,CAmCJ;AACA;AACA;AACC,KAtCD,CAsCE,OAAOE,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACD;AACF,GA7CD;;AA+CAhC,EAAAA,SAAS,CAAC,MAAM;AACZe,IAAAA,cAAc;AACjB,GAFQ,EAEN,CAACT,KAAK,CAACW,OAAP,EAAeX,KAAK,CAACc,KAArB,CAFM,CAAT;;AAIA,MAAGb,OAAO,IAAI,IAAd,EAAmB;AACnB,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,gBACGE,OAAO,CAACF,OAAO,CAAC,KAAD,CAAR;AADV;AAAA;AAAA;AAAA;AAAA,YADF;AAKC,GAND,MAOK,oBACL;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA,4BACE;AAAK,MAAA,EAAE,EAAC,UAAR;AAAmB,MAAA,GAAG,EAAEH,WAAxB;AAAqC,MAAA,GAAG,EAAC;AAAzC;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADK;AAMN,CAhFD;;GAAMC,mB;;KAAAA,mB;AAkFN,eAAeA,mBAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as fcl from \"@onflow/fcl\";\nimport * as t from \"@onflow/types\";\nimport defaultLogo from \"../../assets/img/WildChainImgs/WildChain-logo-long.png\";\n\nconst TokenDataMarketSell = (props) => {\n  const [nftInfo, setNftInfo] = useState(null)\n\n  // Using this function for displaying ipfs content\n  function showImg(s) {\n    let arr = s.split(\"ipfs://\");\n    //console.log(arr);\n    if(s.split(\"ipfs://\").length === 2){\n      let link = \"https://ipfs.io/ipfs/\"+arr[1];\n      //console.log(link);\n      return(\n          <img id=\"gridIcon\" src={link} alt=\"Giraffe\"></img>\n      )\n    }\n  }\n\n  const fetchTokenData = async () => {\n    let testAddr = props.account\n    //console.log(\"Prop ID: \" + props.nftID)\n    let testID = parseInt(props.nftID)\n    try {\n    const encoded = await fcl\n      .send([\n        fcl.script`\n        import Marketplace from 0xProfile\n\n        pub fun main(account: Address, nftId: UInt64) : {String : String} {\n          // Account that owns the NFT. \n          // In this case, this is the same account as the one that minted the NFT and deployed the contract.\n          let nftOwner = getAccount(account)\n          log(\"NFT Owner\")\n          // Simply borrows all capabilities that are available by access levels as defined by the contract\n          let capability = nftOwner.getCapability(/public/NFTSale)\n      \n          // Pull out the \"borrow()\" capability to get the script to borrow from the deployed contract\n          let receiverRef = capability.borrow<&{Marketplace.SalePublic}>()\n              ?? panic(\"Could not borrow the receiver reference\")\n      \n          // At this point, we can use any functions available by capabilities as defined by the contract\n          // Thus, call the getMetadata function.\n          // For the sake of this test, just getting metadata for the NFT with id 1.\n          return receiverRef.getMetadata(id: nftId)\n      }       \n      `,\n      fcl.args( \n        [fcl.arg(testAddr, t.Address),\n        fcl.arg(testID, t.UInt64)] )\n      ])\n    //console.log(\"Data Type: \" + typeof(fcl.authz()))\n    //console.log(fcl.authz().addr)\n    //let testVal = await fcl.authz()\n    //console.log(\"TestVal: \" + await testVal.addr)\n    const decoded = await fcl.decode(encoded)\n    //console.log(\"Decode: \" + decoded)\n    setNftInfo(decoded)\n    //console.log(\"NFT Info: \" + nftInfo)\n    //console.log(\"NFT Info: \" + nftInfo[\"uri\"])\n    //console.log(nftInfo)\n    } catch (error) {\n      console.log(\"NFT not found\")\n    }    \n  };\n\n  useEffect(() => {\n      fetchTokenData();\n  }, [props.account,props.nftID]);\n\n  if(nftInfo != null){\n  return (\n    <div className=\"token-data\">\n      {showImg(nftInfo[\"uri\"])}\n    </div>\n  );\n  }\n  else return (\n  <div className=\"column\">\n    <img id=\"gridIcon\" src={defaultLogo} alt=\"NFT Sold\"></img>\n    <div className=\"center\">NFT Sold</div>\n    </div>\n  )\n};\n\nexport default TokenDataMarketSell;"]},"metadata":{},"sourceType":"module"}